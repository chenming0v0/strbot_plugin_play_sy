# AI记忆管理插件 v2.0

一个功能强大的AstrBot记忆管理插件，让AI能够智能地记住、搜索和管理对话中的重要信息。

## 🚀 主要特性

### 📝 智能记忆管理
- **大容量存储**：默认支持100条记忆（可配置至500条）
- **智能删除策略**：优先保护高重要性记忆，自动清理低重要性的旧记忆
- **自动标签系统**：自动为记忆添加标签（身体交换、实验室、学校、战斗、日常、情感、科技等）
- **记忆过期管理**：可设置记忆自动过期时间

### 🔍 强大的搜索功能
- **多关键词搜索**：支持空格分隔的多个关键词同时搜索
- **智能匹配**：按关键词匹配度和重要性双重排序
- **标签搜索**：可按标签分类查找记忆
- **全量返回**：AI工具现在返回所有相关记忆，不再限制数量

### 📊 记忆分级显示
- **5星记忆**：最重要的记忆，优先显示完整内容
- **4星记忆**：次要记忆，显示摘要
- **3星及以下**：一般记忆，统计数量
- **智能摘要**：长记忆自动截断，保持可读性

## 🛠️ 新版本改进 (v2.0)

### 问题修复
- ✅ 修复了搜索只返回部分记忆的问题
- ✅ 修复了记忆容易丢失的问题
- ✅ 增强了记忆持久性

### 功能增强
- ✅ 记忆容量从10条提升到100条（可配置至500条）
- ✅ AI工具函数现在返回所有相关记忆
- ✅ 添加了智能标签系统
- ✅ 实现了多关键词搜索
- ✅ 优化了记忆显示格式

## 📖 使用说明

### 用户命令

#### 基础命令
- `/memory list` - 列出所有记忆
- `/memory add <内容> [重要性]` - 手动添加记忆
- `/memory search <关键词>` - 搜索记忆（支持多关键词）
- `/memory stats` - 查看记忆统计

#### 管理命令
- `/memory edit <序号> <新内容>` - 编辑记忆
- `/memory update <序号> <重要性>` - 更新重要性
- `/memory remove <序号>` - 删除指定记忆
- `/memory clear` - 清空所有记忆

#### 配置命令
- `/memory_config` - 查看当前配置
- `/memory_reset_config` - 重置为默认配置
- `/mem_help` - 显示帮助信息

### AI工具函数

AI可以自动调用以下函数：

1. **save_memory(content, importance)** - 保存重要信息
2. **get_memories(limit)** - 获取所有记忆（智能分级显示）
3. **search_memories(keyword, show_all)** - 搜索相关记忆
4. **get_memory_stats()** - 获取记忆统计
5. **clear_old_memories(days)** - 清理旧记忆

## ⚙️ 配置项

在管理面板中可配置：

| 配置项 | 说明 | 默认值 | 范围 |
|-------|-----|--------|------|
| max_memories | 最大记忆数量 | 100 | 10-500 |
| auto_save_enabled | 自动保存开关 | true | - |
| importance_threshold | 自动保存阈值 | 3 | 1-5 |
| memory_expire_days | 记忆过期天数 | 30 | 0-365 |
| enable_memory_management | 记忆管理总开关 | true | - |

## 💡 使用建议

1. **重要内容手动标记**：对特别重要的信息，手动使用 `/memory add` 并设置5星重要性
2. **定期查看统计**：使用 `/memory stats` 了解记忆使用情况
3. **善用搜索**：使用多关键词搜索快速找到相关记忆
4. **合理设置容量**：根据需要调整最大记忆数量
5. **定期清理**：清理不再需要的旧记忆，保持记忆库整洁

## 📝 更新日志

### v2.0.0 (2025-10-03)
- 大幅提升记忆容量（10→100）
- 实现智能标签系统
- 优化搜索算法，支持多关键词
- 修复记忆丢失问题
- 改进AI工具函数，返回所有相关记忆
- 优化记忆显示格式

### v1.0.0
- 初始版本发布
- 基础记忆管理功能
- 简单搜索功能

## 🙏 致谢

感谢所有用户的反馈和建议，让这个插件变得更好！

---

原作者：kjqwdw  
二改：chenming0v0
仓库：https://github.com/chenming0v0/strbot_plugin_play_sy
